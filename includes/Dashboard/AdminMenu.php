<?php

namespace Engramium\Optimator\Dashboard;

// If this file is called directly, abort.
defined('ABSPATH') || exit;

/**
 * Add dashboard menu class
 *
 * @author sayedulsayem
 * @since 1.0.0
 */
class AdminMenu {

    use \Engramium\Optimator\Traits\Singleton;

    private $slug = 'optimator-settings';

    /**
     * initialization function
     *
     * @return void
     * @since 1.0.0
     */
    public function init() {
        add_action('admin_menu', [$this, 'admin_menu']);
        add_action('in_admin_header', [$this, 'remove_all_notices'], PHP_INT_MAX);
    }

    /**
     * add admin menu function
     *
     * @return void
     * @since 1.0.0
     */
    public function admin_menu() {
        $capability = 'manage_options';
        $slug       = 'optimator-settings';

        add_menu_page(
            __('Optimator', 'optimator'),
            __('Optimator', 'optimator'),
            $capability,
            $this->slug,
            [$this, 'render_page'],
            'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuNTA2MTQgMTYuOTk5OUM4Ljk5ODYzIDE3LjAwMDIgOC40OTIzNyAxNi45NDk4IDcuOTk0ODggMTYuODQ5NkM3LjUwNDYzIDE2Ljc1MjMgNy4wMjU1OCAxNi42MDUzIDYuNTY1MTQgMTYuNDExQzYuMTI2MjIgMTYuMjIxNSA1LjcwNjI4IDE1Ljk5MDcgNS4zMTA5OCAxNS43MjE5QzQuOTEyMjYgMTUuNDUzNiA0LjU0MDU0IDE1LjE0NzMgNC4yMDEwNSAxNC44MDcyQzMuODYwMDMgMTQuNDY4NiAzLjU1MzM2IDE0LjA5NzIgMy4yODU1MSAxMy42OTgzQzMuMDEyNDYgMTMuMzA0OCAyLjc3OTMgMTIuODg1IDIuNTg5NDYgMTIuNDQ1M0MyLjM5OSAxMS45OTAzIDIuMjUyMDMgMTEuNTE4NCAyLjE1MDUgMTEuMDM1N0MxLjk0OTgzIDEwLjAzOTEgMS45NDk4MyA5LjAxMjYgMi4xNTA1IDguMDE2MDJDMi4yNTIwMyA3LjUzMzM4IDIuMzk5IDcuMDYxNDEgMi41ODk0NiA2LjYwNjRDMi43Nzg5OSA2LjE2NjU2IDMuMDEyMTggNS43NDY4IDMuMjg1NTEgNS4zNTM0MkMzLjU0MTY5IDQuOTM3ODEgMy44NDIzNyA0LjU1MTI5IDQuMTgyMjQgNC4yMDA2N0M0LjUxODQ2IDMuODU3MDUgNC44OTA1NiAzLjU1MDQxIDUuMjkyMTcgMy4yODU5OEM1LjY4NTkyIDMuMDEyOSA2LjEwNjA3IDIuNzc5OTQgNi41NDYzMyAyLjU5MDU4QzcuMDA3ODEgMi4zOTkxNiA3LjQ4NjU3IDIuMjUyMzEgNy45NzYwNyAyLjE1MjAzQzguNDc5NzIgMi4wNTA1NCA4Ljk5MjM1IDIuMDAwMTYgOS41MDYxNCAyLjAwMTY3QzkuOTg1NTQgMS45ODg2MiAxMC40NjM5IDIuMDUyMDcgMTAuOTIzMyAyLjE4OTYyQzExLjMwMTkgMi4zMDQxMyAxMS42MzI0IDIuNTM5NjQgMTEuODY0IDIuODU5OTdDMTIuMDI2OCAzLjExMzI3IDEyLjExOTggMy40MDUwMiAxMi4xMzM2IDMuNzA1NzRDMTIuMTM0NSAzLjk5ODA3IDEyLjA5NDQgNC4yODkwOCAxMi4wMTQ1IDQuNTcwM0MxMS44NDc0IDUuMTc3MzMgMTEuNjM3OSA1Ljc3MTg4IDExLjM4NzQgNi4zNDk1NEMxMC45MTg5IDcuMzM0MzQgMTAuNjMyMiA4LjM5NTQ5IDEwLjU0MDggOS40ODIwMUMxMC42NjM1IDEwLjQ5OCAxMC45NTM4IDExLjQ4NjYgMTEuMzk5OSAxMi40MDc3QzExLjY2ODUgMTMuMDA1MiAxMS44ODg3IDEzLjYyMzMgMTIuMDU4NCAxNC4yNTU5QzEyLjE0NTMgMTQuNTQ4OCAxMi4xODk2IDE0Ljg1MjYgMTIuMTkgMTUuMTU4MUMxMi4xODA5IDE1LjQ3NDIgMTIuMDg1NSAxNS43ODE4IDExLjkxNDEgMTYuMDQ3N0MxMS42ODM5IDE2LjM4MTYgMTEuMzUxNyAxNi42MzIxIDEwLjk2NzIgMTYuNzYxOUMxMC40OTY5IDE2LjkyMTkgMTAuMDAzIDE3LjAwMjQgOS41MDYxNCAxNi45OTk5Wk05LjUwNjE0IDMuMTc5NDhDNy44MjgwNSAzLjE3OTQ4IDYuMjE4NyAzLjg0NTQ4IDUuMDMyMTEgNS4wMzA5NkMzLjg0NTUzIDYuMjE2NDMgMy4xNzg5MSA3LjgyNDI5IDMuMTc4OTEgOS41MDA4MUMzLjE3ODkxIDExLjE3NzMgMy44NDU1MyAxMi43ODUyIDUuMDMyMTEgMTMuOTcwN0M2LjIxODcgMTUuMTU2MSA3LjgyODA1IDE1LjgyMjEgOS41MDYxNCAxNS44MjIxQzEwLjI3NzQgMTUuODIyMSAxMC43NjAzIDE1LjY1MyAxMC45NTQ3IDE1LjQwODdDMTEuMDY0NiAxNS4xMjY2IDExLjA2NDYgMTQuODEzNiAxMC45NTQ3IDE0LjUzMTZDMTAuNzg2NSAxMy45NTk2IDEwLjU3NjkgMTMuNDAwNSAxMC4zMjc2IDEyLjg1ODhDMTAuMTE0NCAxMi4zMzg4IDkuODg4NjYgMTEuOCA5LjcwMDUzIDExLjI0ODdDOS41MTg1NiAxMC42ODkzIDkuNDE1MTUgMTAuMTA3NCA5LjM5MzI2IDkuNTE5NkM5LjQ2OTIyIDguMjY4NTggOS43ODQyNSA3LjA0MzY1IDEwLjMyMTMgNS45MTFDMTAuNTQ1NyA1LjM5MDQ3IDEwLjczMjIgNC44NTQ0NyAxMC44Nzk0IDQuMzA3MTdDMTAuOTc3MSA0LjA1NTI1IDEwLjk3NzEgMy43NzU5NyAxMC44Nzk0IDMuNTI0MDVDMTAuNzkxNSAzLjQxODI4IDEwLjY3MzQgMy4zNDE4IDEwLjU0MDggMy4zMDQ3OEMxMC4yMDQxIDMuMjExNzMgOS44NTUzNSAzLjE2OTUgOS41MDYxNCAzLjE3OTQ4WiIgZmlsbD0iI0E3QUFBRCIvPgo8cGF0aCBkPSJNMTIuODI5NyAyLjcyODRDMTMuMzQxNiAzLjAxNjA2IDEzLjcyMzMgMy40ODkzNCAxMy44OTU3IDQuMDUwMzFDMTMuOTk5MiA0LjQwMTc4IDE0LjAyNyA0Ljc3MTE3IDEzLjk3NzIgNS4xMzQxNEMxMy43NzI0IDYuMDkyNTkgMTMuNDk3OCA3LjAzNDg0IDEzLjE1NTcgNy45NTMzN0MxMy4wMDM0IDguNDQyODEgMTIuOTE5IDguOTUwODQgMTIuOTA0OSA5LjQ2MzIyQzEyLjkwMTggOS41MTUzOCAxMi45MDE4IDkuNTY3NjggMTIuOTA0OSA5LjYxOTg0QzEyLjkzOTQgMTAuMTM3OCAxMy4wNDcgMTAuNjQ4MiAxMy4yMjQ3IDExLjEzNkMxMy41OTE1IDExLjk4NzggMTMuODg5MyAxMi44Njc4IDE0LjExNTIgMTMuNzY3MkMxNC4yMDM2IDE0LjIzNjYgMTQuMTQ2NyAxNC43MjE4IDEzLjk1MjEgMTUuMTU4MUMxMy43MDQyIDE1LjYxODMgMTMuMzA5IDE1Ljk4MjMgMTIuODI5NyAxNi4xOTE4QzEzLjAyODMgMTUuOTY5MSAxMy4xOTg5IDE1LjcyMjkgMTMuMzM3NiAxNS40NTg4QzEzLjQ0MyAxNS4yNDUxIDEzLjUwNjkgMTUuMDEzNCAxMy41MjU3IDE0Ljc3NTlDMTMuNDk5NSAxNC4xOTYzIDEzLjMyNDYgMTMuNjMzMyAxMy4wMTc4IDEzLjE0MDdDMTIuNzM1NiAxMi42MDIgMTIuNDI4MyAxMi4wNjMyIDEyLjE5IDExLjQ5MzFDMTIuMDU4MiAxMS4xODg5IDExLjk1MTMgMTAuODc0NyAxMS44NzAyIDEwLjU1MzNDMTEuNzY1IDEwLjE1NzEgMTEuNzE4NSA5Ljc0NzYxIDExLjczMjMgOS4zMzc5MkMxMS44NDIyIDguMTExNzQgMTIuMjI1NyA2LjkyNTc1IDEyLjg1NDcgNS44NjcxNEMxMy4wNjU5IDUuNDY5ODQgMTMuMjMgNS4wNDkzNSAxMy4zNDM5IDQuNjE0MTVDMTMuMzc4MiA0LjQ1MTU2IDEzLjM5MDkgNC4yODUxNCAxMy4zODE1IDQuMTE5MjJDMTMuMzQyMyAzLjYxMjQ4IDEzLjE0OTkgMy4xMjk2IDEyLjgyOTcgMi43MzQ2N1YyLjcyODRaIiBmaWxsPSIjQTdBQUFEIi8+CjxwYXRoIGQ9Ik0xNC45NDkyIDQuMzc2MDhDMTUuMjA2MSA0LjU1NzI0IDE1LjQyMDIgNC43OTI0OCAxNS41NzYzIDUuMDY1MjNDMTUuODMyNyA1LjU2Nzc1IDE1LjkwMzggNi4xNDQ0NyAxNS43NzY5IDYuNjk0MTFDMTUuNjI2NCA3LjQzOTY0IDE1LjMxMjkgOC4xNDc1OCAxNS4yMTI2IDguODkzMTFDMTUuMTc0NyA5LjA5OTkgMTUuMTUzNyA5LjMwOTQyIDE1LjE0OTggOS41MTk2QzE1LjE0OTggOS42MDEwNSAxNS4xNDk4IDkuNjc2MjMgMTUuMTQ5OCA5Ljc1NzY3QzE1LjIxNjIgMTAuMjU5NyAxNS4zMzYgMTAuNzUzMyAxNS41MDczIDExLjIyOTlDMTUuNjY4NyAxMS42Nzc4IDE1Ljc4MDIgMTIuMTQyMiAxNS44Mzk2IDEyLjYxNDVDMTUuOTAzMSAxMy4xMzEgMTUuNzYzOCAxMy42NTIgMTUuNDUwOCAxNC4wNjhDMTUuMzI2NiAxNC4yMzQ5IDE1LjE3NjMgMTQuMzgwOSAxNS4wMDU2IDE0LjUwMDJMMTQuOTM2NiAxNC41NTA0VjE0LjUxMjhDMTUuMTA0NiAxNC4yMDE5IDE1LjE5MjUgMTMuODU0MiAxNS4xOTI1IDEzLjUwMUMxNS4xOTI1IDEzLjE0NzcgMTUuMTA0NiAxMi44IDE0LjkzNjYgMTIuNDg5MkMxNC44MDUgMTIuMTk0NyAxNC42NjA3IDExLjkyNTMgMTQuNTEwMiAxMS42MTg0QzE0LjI5MjYgMTEuMTg2NyAxNC4xMjgzIDEwLjczMDIgMTQuMDIxMSAxMC4yNTg5QzEzLjk2MzcgMTAuMDA2IDEzLjkzNDMgOS43NDc1NyAxMy45MzMzIDkuNDg4MjhDMTMuOTYyMSA4LjczMjMgMTQuMTYzNyA3Ljk5Mjk0IDE0LjUyMjggNy4zMjY4N0MxNC43MDQ2IDYuOTMyMTggMTQuOTExNiA2LjU2MjU1IDE1LjA2MjEgNi4xNjc4NkMxNS4xMjggNS45ODc4OCAxNS4xNzIyIDUuODAwNyAxNS4xOTM3IDUuNjEwMjhDMTUuMjIgNS4zMDAzOCAxNS4xNzkzIDQuOTg4NDcgMTUuMDc0NiA0LjY5NTZDMTUuMDM3IDQuNTg5MDkgMTQuOTkzMSA0LjQ4MjU5IDE0Ljk0OTIgNC4zNzYwOFoiIGZpbGw9IiNBN0FBQUQiLz4KPHBhdGggZD0iTTE2LjMwOTkgNy43MDI3N0MxNi4zODc5IDcuNzM5NzUgMTYuNDU5OCA3Ljc4ODMzIDE2LjUyMzIgNy44NDY4NkMxNi43MjYxIDguMDIzNTIgMTYuODY2OSA4LjI2MDc1IDE2LjkyNDUgOC41MjM0OEMxNi45NjgzIDguNzk4OTMgMTYuOTgwOSA5LjA3ODQ0IDE2Ljk2MjEgOS4zNTY3MUMxNy4wMTI2IDkuNjc4NDQgMTcuMDEyNiAxMC4wMDYxIDE2Ljk2MjEgMTAuMzI3OEMxNi44ODAxIDEwLjYzNjEgMTYuNjc5NSAxMC44OTk2IDE2LjQwNCAxMS4wNjA4TDE2LjI5MTEgMTEuMTIzNFYxMS4wNjA4QzE2LjMwNDQgMTAuODUyMiAxNi4zMDQ0IDEwLjY0MjkgMTYuMjkxMSAxMC40MzQzQzE2LjI3ODEgMTAuMzIxMiAxNi4yNTI4IDEwLjIwOTkgMTYuMjE1OSAxMC4xMDIyQzE2LjE0IDkuODg3NDkgMTYuMDg5NSA5LjY2NDYyIDE2LjA2NTQgOS40MzgxNkMxNi4wNjI0IDkuMzk2NDUgMTYuMDYyNCA5LjM1NDU3IDE2LjA2NTQgOS4zMTI4NkMxNi4wNjY5IDkuMTQ2MDEgMTYuMDg4IDguOTc5OSAxNi4xMjgxIDguODE3OTNDMTYuMTI4MSA4LjY5MjYzIDE2LjE4NDUgOC41NzM2IDE2LjIwOTYgOC40NDgzQzE2LjI0NjYgOC4yMTYxMiAxNi4yNjc2IDcuOTgxNjggMTYuMjcyMyA3Ljc0NjYyVjcuNzE1M0wxNi4zMDk5IDcuNzAyNzdaIiBmaWxsPSIjQTdBQUFEIi8+CjxwYXRoIGQ9Ik0xMC43NjAzIDE0LjkzODhDOS45NDYwOSAxNC45NDUgOS4xMzcyMiAxNC44MDcxIDguMzcxMTIgMTQuNTMxNkM4LjAwOTQ2IDE0LjQwMTkgNy42NjA5MSAxNC4yMzgzIDcuMzMwMTcgMTQuMDQyOUM3LjAwNTk5IDEzLjg2MzIgNi42OTk0NiAxMy42NTM1IDYuNDE0NjQgMTMuNDE2NEM2LjEzNTEzIDEzLjE4MDEgNS44ODA4NSAxMi45MTU2IDUuNjU1ODcgMTIuNjI3QzUuNDMzODEgMTIuMzM4NCA1LjIzODYxIDEyLjAzMDIgNS4wNzI2OSAxMS43MDYxQzQuOTE2MTIgMTEuMzc2NSA0Ljc5MjIxIDExLjAzMjMgNC43MDI3MSAxMC42Nzg2QzQuNTM1NTMgOS45NTA5IDQuNTM1NTMgOS4xOTQ4MSA0LjcwMjcxIDguNDY3MDlDNC43OTIyMSA4LjExMzM4IDQuOTE2MTIgNy43NjkyNSA1LjA3MjY5IDcuNDM5NjRDNS4zOTg5MiA2Ljc3MzQ2IDUuODU1MTggNi4xNzkxNyA2LjQxNDY0IDUuNjkxNzJDNi43MDA4NiA1LjQ1NjUxIDcuMDA3MjIgNS4yNDY4NyA3LjMzMDE3IDUuMDY1MjNDNy42NjA5MSA0Ljg2OTgyIDguMDA5NDYgNC43MDYyIDguMzcxMTIgNC41NzY1NkM5LjEzNTY3IDQuMjkyNDcgOS45NDQ1OSA0LjE0NjExIDEwLjc2MDMgNC4xNDQyOEMxMC45NjcyIDQuMTQ0MjggMTEuMTgwNCA0LjE0NDI4IDExLjM4NzQgNC4xNDQyOEwxMS4yODcgNS4zMjIwOUMxMS4xMTM3IDUuMzEyNTcgMTAuOTM5OSA1LjMxMjU3IDEwLjc2NjYgNS4zMjIwOUM4LjAxMzY5IDUuMzIyMDkgNS43NDk5MyA3LjIwMTU3IDUuNzQ5OTMgOS41Mzg0QzUuNzQ5OTMgMTEuODc1MiA3Ljk4ODYxIDEzLjc2MSAxMC43NjY2IDEzLjc2MUMxMC45OTI4IDEzLjc2MTEgMTEuMjE4OSAxMy43NDg2IDExLjQ0MzggMTMuNzIzNEwxMS41ODE4IDE0Ljg5NDlDMTEuMzA5IDE0LjkyNTYgMTEuMDM0NyAxNC45NDAyIDEwLjc2MDMgMTQuOTM4OFoiIGZpbGw9IiNBN0FBQUQiLz4KPHBhdGggZD0iTTEwLjU0MDggMTMuMDQwNUM5LjY0MDk1IDEyLjc5NjcgOC44MTE1NCAxMi4zNDM3IDguMTIwMjkgMTEuNzE4NkM3LjgxNTEyIDExLjQzMjcgNy41NjI1NSAxMS4wOTU2IDcuMzc0MDcgMTAuNzIyNUM3LjE4NzU3IDEwLjM0ODkgNy4wOTA5NSA5LjkzNzA0IDcuMDkxODggOS41MTk2QzcuMDk0NzMgOS4wOTcxNSA3LjE5NTYxIDguNjgxMTIgNy4zODY2MSA4LjMwNDJDNy41ODQ3OCA3LjkzMDUzIDcuODQ1NjcgNy41OTM2IDguMTU3OTIgNy4zMDgwOEM4Ljg3NjM5IDYuNjc1MDEgOS43MzY2NyA2LjIyMzc5IDEwLjY2NjIgNS45OTI0NEwxMC45Nzk4IDcuMTI2NEMxMC4yMzMyIDcuMzEwMiA5LjU0MTA2IDcuNjY4ODMgOC45NjA1OCA4LjE3MjY0QzguNzU2NyA4LjMzNjk1IDguNTg4NjUgOC41NDEyMiA4LjQ2Njc4IDguNzcyODdDOC4zNDQ5MiA5LjAwNDUzIDguMjcxODEgOS4yNTg2NSA4LjI1MTk4IDkuNTE5NkM4LjI2Njg0IDkuNzc0NzIgOC4zMzI3NyAxMC4wMjQzIDguNDQ1ODYgMTAuMjUzNUM4LjU1ODk2IDEwLjQ4MjcgOC43MTY5MiAxMC42ODY5IDguOTEwNDEgMTAuODU0QzkuNDY0MzkgMTEuMzQ5NiAxMC4xMjg2IDExLjcwNjEgMTAuODQ4MSAxMS44OTRMMTAuNTQwOCAxMy4wNDA1WiIgZmlsbD0iI0E3QUFBRCIvPgo8L3N2Zz4K',
            30
        );
    }

    /**
     * render html in menu function
     *
     * @return void
     * @since 1.0.0
     */
    public function render_page() {
        echo '<div class="wrap"><div id="optimator-dashboard-app"></div></div>';
    }

    /**
     * remove all notices from menu function
     *
     * @return void
     * @since 1.0.0
     */
    public function remove_all_notices() {
        if (!$this->is_page()) return;
        remove_all_actions('admin_notices');
        remove_all_actions('all_admin_notices');
        remove_all_actions('user_admin_notices');
    }

    /**
     * is menu page check function
     *
     * @return boolean
     * @since 1.0.0
     */
    public function is_page() {
        return (isset($_GET['page']) && (sanitize_text_field($_GET['page']) === $this->slug));
    }
}
